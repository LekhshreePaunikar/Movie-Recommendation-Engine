<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Movie Recommender</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Font Awesome CDN-->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <!-- Custom styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
</head>

<body class="bg-app text-light" data-bs-theme="dark">

  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-12 col-md-10 col-lg-8">
        <!-- Main card that holds the UI -->
        <div class="card card-app shadow-lg border-0">
          <div class="card-body p-4 p-md-5">
            <h1 class="h2 fw-bold mb-4 brand-title">
              <i class="fa-solid fa-film me-2 text-brand"></i>Movie Recommender
            </h1>
            <!-- Search form: user types or picks a title to get recommendations -->
            <form id="search-form" method="POST" action="/recommend" autocomplete="off" class="mb-4">
              <label for="movie" class="form-label">Type or select a movie title</label>
              <div class="input-group">
                <input list="titles" id="movie" name="movie" class="form-control form-control-lg input-app"
                  placeholder="e.g., Avatar" required />
                  <!-- Datalist that app.js will populate with live suggestions -->
                <datalist id="titles"></datalist>
                <button type="submit" class="btn btn-brand btn-lg px-4">
                  <i class="fa-solid fa-magnifying-glass me-2"></i>Recommend
                </button>
              </div>
              <div class="form-text text-muted-2 mt-2">
                Start typing to see suggestions. Press Enter to search.
              </div>
            </form>

            {% if base_title is not none %}
            <h2 class="h4 fw-semibold mb-3">
              Recommendations
            </h2>
            <p class="mb-3">
              Because you like <strong class="text-brand">{{ base_title }}</strong>, you might also enjoy:
            </p>
            <!-- Ordered list of recommended titles -->
            <ol class="list-group list-group-numbered list-group-app">
              {% for r in recs %}
              <li class="list-group-item list-group-item-app">{{ r }}</li>
              {% endfor %}
            </ol>
            <!-- Else, surface any error from the server (e.g., no exact match) -->
            {% elif error_msg %}
            <div class="alert alert-danger alert-app mt-3" role="alert">
              <i class="fa-solid fa-circle-exclamation me-2"></i>{{ error_msg }}
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- App JS -->
  <script src="{{ url_for('static', filename='app.js') }}" defer></script>
  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
</body>

</html>